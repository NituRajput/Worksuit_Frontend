#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit validation..."

# Run lint-staged for formatting and basic linting
echo "ğŸ“ Running lint-staged..."
npx lint-staged

# Check for TypeScript errors
echo "ğŸ“ Checking TypeScript types..."
npm run type-check

# Check for critical ESLint errors (excluding formatting)
echo "ğŸš¨ Checking for critical ESLint errors..."
if npx eslint . --ext .js,.jsx,.ts,.tsx --quiet --max-warnings 0; then
  echo "âœ… No critical ESLint errors found"
else
  echo "âŒ Critical ESLint errors detected. Please fix them before committing."
  exit 1
fi

echo "âœ… Pre-commit validation passed!"